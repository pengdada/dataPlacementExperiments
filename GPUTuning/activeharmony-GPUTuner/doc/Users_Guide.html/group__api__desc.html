<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Active Harmony User&#39;s Guide: Harmony Descriptor Management Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Active Harmony User&#39;s Guide
   &#160;<span id="projectnumber">4.6.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__api__desc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Harmony Descriptor Management Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga688299e77dd9b06b3ccdeefe140e4ac3"><td class="memItemLeft" align="right" valign="top">hdesc_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__desc.html#ga688299e77dd9b06b3ccdeefe140e4ac3">ah_alloc</a> (void)</td></tr>
<tr class="memdesc:ga688299e77dd9b06b3ccdeefe140e4ac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and initialize a new Harmony descriptor.  <a href="#ga688299e77dd9b06b3ccdeefe140e4ac3">More...</a><br /></td></tr>
<tr class="separator:ga688299e77dd9b06b3ccdeefe140e4ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf002ae876b4347b6ea840f675cc50518"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__desc.html#gaf002ae876b4347b6ea840f675cc50518">ah_args</a> (hdesc_t *hdesc, int *argc, char **argv)</td></tr>
<tr class="memdesc:gaf002ae876b4347b6ea840f675cc50518"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find configuration directives in the command-line arguments.  <a href="#gaf002ae876b4347b6ea840f675cc50518">More...</a><br /></td></tr>
<tr class="separator:gaf002ae876b4347b6ea840f675cc50518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ea379ede97703d438acc80bcc112a5f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__desc.html#ga4ea379ede97703d438acc80bcc112a5f">ah_id</a> (hdesc_t *hdesc, const char *id)</td></tr>
<tr class="memdesc:ga4ea379ede97703d438acc80bcc112a5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign an identifying string to this client.  <a href="#ga4ea379ede97703d438acc80bcc112a5f">More...</a><br /></td></tr>
<tr class="separator:ga4ea379ede97703d438acc80bcc112a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0e4bc8f2cb3f584e679c2612ca7e31d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__desc.html#gad0e4bc8f2cb3f584e679c2612ca7e31d">ah_connect</a> (hdesc_t *hdesc, const char *host, int port)</td></tr>
<tr class="memdesc:gad0e4bc8f2cb3f584e679c2612ca7e31d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establish a connection with a Harmony tuning session.  <a href="#gad0e4bc8f2cb3f584e679c2612ca7e31d">More...</a><br /></td></tr>
<tr class="separator:gad0e4bc8f2cb3f584e679c2612ca7e31d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45a2361b1abc97b4da48cee00e5879ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__desc.html#ga45a2361b1abc97b4da48cee00e5879ba">ah_close</a> (hdesc_t *hdesc)</td></tr>
<tr class="memdesc:ga45a2361b1abc97b4da48cee00e5879ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the connection to a Harmony tuning session.  <a href="#ga45a2361b1abc97b4da48cee00e5879ba">More...</a><br /></td></tr>
<tr class="separator:ga45a2361b1abc97b4da48cee00e5879ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32b093aa695a4db3c3acc159ec34568a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__desc.html#ga32b093aa695a4db3c3acc159ec34568a">ah_free</a> (hdesc_t *hdesc)</td></tr>
<tr class="memdesc:ga32b093aa695a4db3c3acc159ec34568a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release resources associated with a Harmony client descriptor.  <a href="#ga32b093aa695a4db3c3acc159ec34568a">More...</a><br /></td></tr>
<tr class="separator:ga32b093aa695a4db3c3acc159ec34568a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A Harmony descriptor is an opaque structure that stores state associated with a client's connection to a tuning session. A tuning session hosts one or more tuning search tasks, and is the only intermediary by which clients may communicate with search tasks. The functions within this section allow the user to create and manage the resources controlled by the descriptor. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga688299e77dd9b06b3ccdeefe140e4ac3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdesc_t* ah_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and initialize a new Harmony descriptor. </p>
<p>All client API functions require a valid Harmony descriptor to function correctly. The descriptor is designed to be used as an opaque type and no guarantees are made about the contents of its structure.</p>
<p>Heap memory is allocated for the descriptor, so be sure to call <a class="el" href="group__api__desc.html#ga32b093aa695a4db3c3acc159ec34568a" title="Release resources associated with a Harmony client descriptor. ">ah_free()</a> when it is no longer needed.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns a new Harmony descriptor upon success, and <code>NULL</code> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf002ae876b4347b6ea840f675cc50518"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ah_args </td>
          <td>(</td>
          <td class="paramtype">hdesc_t *&#160;</td>
          <td class="paramname"><em>hdesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find configuration directives in the command-line arguments. </p>
<p>This function iterates through the command-line arguments (as passed to the main() function) to search for Harmony configuration directives in the form NAME=VAL. Any arguments matching this pattern are added to the configuration and removed from <code>argv</code>.</p>
<p>Iteration through the command-line arguments stops prematurely if a double-dash ("--") token is found. All non-directive arguments are shifted to the front of <code>argv</code>. Finally, <code>argc</code> is updated to reflect the remaining number of program arguments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdesc</td><td>Harmony descriptor returned from <a class="el" href="group__api__desc.html#ga688299e77dd9b06b3ccdeefe140e4ac3" title="Allocate and initialize a new Harmony descriptor. ">ah_alloc()</a>. </td></tr>
    <tr><td class="paramname">argc</td><td>Address of the <code>argc</code> variable. </td></tr>
    <tr><td class="paramname">argv</td><td>Address of the command-line argument array (i.e., the value of <code>argv</code>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of directives successfully taken from <code>argv</code>, or -1 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ga45a2361b1abc97b4da48cee00e5879ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ah_close </td>
          <td>(</td>
          <td class="paramtype">hdesc_t *&#160;</td>
          <td class="paramname"><em>hdesc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the connection to a Harmony tuning session. </p>
<p>Terminates communication with a Harmony session. Task descriptors associated with this session may continue to be used in a limited capacity. For example, best point retrieval is available (<a class="el" href="group__api__search.html#ga6ed1d55e1eb409a8777a259197c8125b" title="Set values under Harmony&#39;s control to the best known configuration. ">ah_best()</a>), but new testing values are not (<a class="el" href="group__api__search.html#ga497a30ea30ccf7631f3ebd88a5226463" title="Fetch a new configuration from the Harmony search. ">ah_fetch()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdesc</td><td>Harmony descriptor returned from <a class="el" href="group__api__desc.html#ga688299e77dd9b06b3ccdeefe140e4ac3" title="Allocate and initialize a new Harmony descriptor. ">ah_alloc()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, and -1 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gad0e4bc8f2cb3f584e679c2612ca7e31d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ah_connect </td>
          <td>(</td>
          <td class="paramtype">hdesc_t *&#160;</td>
          <td class="paramname"><em>hdesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establish a connection with a Harmony tuning session. </p>
<p>This function enables communication with a tuning session, Active Harmony's search management process. It must succeed prior to calling any search interface functions (e.g., <a class="el" href="group__api__task.html#ga7d75ddac8b3f947147c2712d4fe93212" title="Join an established Harmony tuning search task. ">ah_join()</a>, ah_launch(), etc.).</p>
<p>If <em>host</em> is <code>NULL</code>, its value will be taken from the environment variable <code>HARMONY_HOST</code>. If <code>HARMONY_HOST</code> is not defined, the environment variable <code>HARMONY_HOME</code> will be used to initiate a private tuning session, which will be available only to the local process.</p>
<p>If <em>port</em> is 0, its value will be taken from the environment variable <code>HARMONY_PORT</code>, if defined. Otherwise, its value will be taken from the src/defaults.h file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdesc</td><td>Harmony descriptor returned from <a class="el" href="group__api__desc.html#ga688299e77dd9b06b3ccdeefe140e4ac3" title="Allocate and initialize a new Harmony descriptor. ">ah_alloc()</a>. </td></tr>
    <tr><td class="paramname">host</td><td>Host of the Harmony server (or <code>NULL</code>). </td></tr>
    <tr><td class="paramname">port</td><td>Port of the Harmony server.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success. Otherwise, -1 is returned and a string indicating the nature of the failure may be retrieved from <a class="el" href="group__api__error.html#ga283d348065cb8e2dcc4076c6a9bfe65b" title="Retrieve the most recent Harmony API error string. ">ah_error()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga32b093aa695a4db3c3acc159ec34568a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ah_free </td>
          <td>(</td>
          <td class="paramtype">hdesc_t *&#160;</td>
          <td class="paramname"><em>hdesc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release resources associated with a Harmony client descriptor. </p>
<p>If the descriptor is connected to a search session, this function will call <a class="el" href="group__api__task.html#ga79790e88a71407bd714a4d30276dd2a4" title="Leave a tuning search task. ">ah_leave()</a> on any active search tasks this client is currently participating in.</p>
<dl class="section note"><dt>Note</dt><dd>This function will not free memory for search definition structures built using this descriptor. They must be released separately using ah_def_fini().</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function will free memory for search tasks associated with this session descriptor. This will invalidate pointers that were returned from functions like <a class="el" href="group__api__task.html#ga9bc92174b0f146346dda0c6b8ec2466e" title="Start a new Harmony tuning search task. ">ah_start()</a> and <a class="el" href="group__api__task.html#ga7d75ddac8b3f947147c2712d4fe93212" title="Join an established Harmony tuning search task. ">ah_join()</a>. Be sure these are no longer in use before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdesc</td><td>Harmony descriptor returned from <a class="el" href="group__api__desc.html#ga688299e77dd9b06b3ccdeefe140e4ac3" title="Allocate and initialize a new Harmony descriptor. ">ah_alloc()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4ea379ede97703d438acc80bcc112a5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ah_id </td>
          <td>(</td>
          <td class="paramtype">hdesc_t *&#160;</td>
          <td class="paramname"><em>hdesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assign an identifying string to this client. </p>
<p>Set the client identification string. All messages sent to the tuning session will be tagged with this string, allowing the framework to distinguish clients from one another. As such, care should be taken to ensure this string is unique among all clients participating in a tuning session.</p>
<p>If this function is not called, the client will be assigned an ID based on its hostname and process ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdesc</td><td>Harmony descriptor returned from <a class="el" href="group__api__desc.html#ga688299e77dd9b06b3ccdeefe140e4ac3" title="Allocate and initialize a new Harmony descriptor. ">ah_alloc()</a>. </td></tr>
    <tr><td class="paramname">id</td><td>Unique identification string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, and -1 otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
